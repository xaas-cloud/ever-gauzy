<nb-card class="card-scroll">
  <nb-card-header>
    <h5>{{ 'INTEGRATIONS.MAKE_COM.SETTINGS.TITLE' | translate }}</h5>
  </nb-card-header>
  <nb-card-body>
    @if (loading) {
      <div class="d-flex justify-content-center">
        <nb-spinner></nb-spinner>
      </div>
    }
    @if (!loading) {
      <form class="col-xl-6 col-12" [formGroup]="form" (ngSubmit)="saveSettings()">
        <div class="form-group">
          <nb-checkbox formControlName="isEnabled">
            {{ 'INTEGRATIONS.MAKE_COM.SETTINGS.ENABLE_INTEGRATION' | translate }}
          </nb-checkbox>
        </div>
        <div class="form-group">
          <label for="webhookUrl" class="label">
            {{ 'INTEGRATIONS.MAKE_COM.SETTINGS.WEBHOOK_URL' | translate }}
          </label>
          <input
            nbInput
            fullWidth
            type="url"
            id="webhookUrl"
            formControlName="webhookUrl"
            [placeholder]="'INTEGRATIONS.MAKE_COM.SETTINGS.WEBHOOK_URL_PLACEHOLDER' | translate"
            />
            @if (form.get('webhookUrl').invalid && form.get('webhookUrl').touched) {
              <div class="text-danger">
                @if (form.get('webhookUrl').errors?.required) {
                  <span>
                    {{ 'VALIDATION.FIELD_REQUIRED' | translate }}
                  </span>
                }
                @if (form.get('webhookUrl').errors?.pattern) {
                  <span>
                    {{ 'INTEGRATIONS.MAKE_COM.SETTINGS.WEBHOOK_URL_INVALID' | translate }}
                  </span>
                }
              </div>
            }
          </div>
          <div class="actions">
            <button nbButton status="primary" type="submit" [disabled]="form.invalid || loading">
              @if (loading) {
                <nb-icon icon="loader-outline" pack="eva"></nb-icon>
              }
              {{ 'INTEGRATIONS.MAKE_COM.SETTINGS.SAVE' | translate }}
            </button>
          </div>
        </form>
      }
    </nb-card-body>
  </nb-card>
