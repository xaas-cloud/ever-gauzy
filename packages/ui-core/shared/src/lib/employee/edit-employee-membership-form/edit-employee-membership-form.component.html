<nb-card class="card">
  <nb-card-header>
    @if (!showAddCard) {
      <button (click)="showAddCard = !showAddCard" nbButton status="success">
        <nb-icon class="mr-1" icon="plus-outline"></nb-icon>{{ 'BUTTONS.ADD' | translate }}
      </button>
    }
    @if (showAddCard) {
      <div class="container m-0 w-25">
        <div class="row">
          <form [formGroup]="form" class="col">
            <ng-select
              id="departmentsSelect"
              [hideSelected]="true"
              multiple="true"
              bindLabel="name"
              appendTo="body"
              formControlName="departments"
              [placeholder]="placeholder"
              fullWidth
              >
              @for (entity of organizationEntities; track entity) {
                <ng-option [value]="entity.id">
                  {{ entity.name }}
                </ng-option>
              }
            </ng-select>
          </form>
        </div>
        <div class="row mt-3">
          <span class="mr-3 ml-3">
            <button (click)="showAddCard = !showAddCard" nbButton status="basic" outline>
              {{ 'BUTTONS.CANCEL' | translate }}
            </button>
          </span>
          <span>
            <button (click)="submitForm()" nbButton status="success" [disabled]="form.invalid">
              {{ 'BUTTONS.ADD' | translate }}
            </button>
          </span>
        </div>
      </div>
    }
  </nb-card-header>
  @if (employeeEntities?.length) {
    <nb-card-body class="entities">
      <div class="mb-3">
        <strong>{{ title }}</strong>
      </div>
      @for (entity of employeeEntities; track entity) {
        <nb-card>
          <nb-card-body>
            {{ entity.name }}
            <nb-actions class="float-right" e="medium">
              <nb-action (click)="removeDepartment(entity.id)" class="d-inline pr-0" icon="close"></nb-action>
            </nb-actions>
          </nb-card-body>
        </nb-card>
      }
    </nb-card-body>
  }
</nb-card>
