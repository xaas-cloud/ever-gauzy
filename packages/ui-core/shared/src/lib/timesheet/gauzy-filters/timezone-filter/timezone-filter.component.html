<button
  class="popover-button"
  nbButton
  size="small"
  status="basic"
  nbPopoverPlacement="bottom"
  [nbPopover]="nbPopoverTemplate"
  nbPopoverTrigger="click"
  #popover="nbPopover"
  >
  <div>
    @if (isTimezone) {
      {{ getTimeZoneWithOffset() }}
    }
    @if (isTimeFormat) {
      / {{ selectedTimeFormat }} hour
    }
  </div>
  <nb-icon icon="more-vertical-outline"></nb-icon>
</button>

<ng-template #nbPopoverTemplate>
  <div class="popover-body">
    @if (isTimezone) {
      <div class="category">
        <div class="view">{{ 'TIMESHEET.TIME_ZONE' | translate }}</div>
        @for (timeZoneOption of timeZoneOptions; track timeZoneOption) {
          <div class="title" (click)="updateSelectedTimeZone(timeZoneOption.value); closePopover()">
            <i
              [ngStyle]="{ visibility: selectedTimeZone === timeZoneOption.value ? 'visible' : 'hidden' }"
              class="fas fa-check"
            ></i>
            <div>{{ timeZoneOption.label }}</div>
          </div>
        }
      </div>
      @if (isTimeFormat) {
        <div class="line"></div>
      }
    }
    @if (isTimeFormat) {
      <div class="category">
        <div class="view">{{ 'TIMESHEET.TIME_FORMAT' | translate }}</div>
        @for (timeFormatsOption of timeFormatsOptions; track timeFormatsOption) {
          <div class="title" (click)="updateSelectedTimeFormat(timeFormatsOption); closePopover()">
            <i
              [ngStyle]="{ visibility: selectedTimeFormat === timeFormatsOption ? 'visible' : 'hidden' }"
              class="fas fa-check"
            ></i>
            <div>{{ timeFormatsOption }} hour</div>
          </div>
        }
      </div>
    }
  </div>
</ng-template>
