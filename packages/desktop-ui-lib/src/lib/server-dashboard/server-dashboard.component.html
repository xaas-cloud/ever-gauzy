<nb-layout>
  <nb-layout-column class="top-bottom-space">
    <nb-card class="fh">
      <nb-card-body class="card-body">
        <div class="row content-body">
          <div class="col-12 text-center margin-content">
            <img [src]="gauzyIcon" [class]="styles.icon" />
          </div>
          @if (!isServerApi && !isAgent) {
            <div class="col-12 text-center margin-content">
              @if (isExpandWindow) {
                <h4>{{ 'SERVER' | translate | uppercase }}</h4>
              }
              @if (!isExpandWindow) {
                <h5>{{ 'SERVER' | translate | uppercase }}</h5>
              }
            </div>
          }
          @if (isServerApi) {
            <div class="col-12 text-center margin-content">
              @if (isExpandWindow) {
                <h4>{{ 'server_api' | translate | uppercase }}</h4>
              }
              @if (!isExpandWindow) {
                <h5>{{ 'server_api' | translate | uppercase }}</h5>
              }
            </div>
          }

          @if (isAgent) {
            <div class="col-12 text-center margin-content">
              @if (isExpandWindow) {
                <h4>{{ 'AGENT_APP' | translate | uppercase }}</h4>
              }
              @if (!isExpandWindow) {
                <h5>{{ 'AGENT_APP' | translate | uppercase }}</h5>
              }
            </div>
          }
          @if (isExpandWindow || isAgent) {
            <div class="col-12 text-center accordion margin-content">
              <nb-accordion multi>
                <nb-accordion-item
                  #logServer
                  [expanded]="logIsOpen || isAgent"
                  (collapsedChange)="logBoxChange($event)"
                  >
                  @if (!isServerApi && !isAgent) {
                    <nb-accordion-item-header>
                      {{ 'SERVER_LOG' | translate }}
                    </nb-accordion-item-header>
                  }
                  @if (isServerApi) {
                    <nb-accordion-item-header>
                      {{ 'SERVER_API_LOG' | translate }}
                    </nb-accordion-item-header>
                  }
                  @if (isAgent) {
                    <nb-accordion-item-header>
                      {{ 'AGENT_LOG' | translate }}
                    </nb-accordion-item-header>
                  }
                  <nb-accordion-item-body class="log-box">
                    <div class="log-content" #logBox>
                      @for (content of logContents; track content) {
                        <p class="content-text">
                          {{ content }}
                        </p>
                      }
                    </div>
                  </nb-accordion-item-body>
                </nb-accordion-item>
              </nb-accordion>
            </div>
          }
          @if (!isAgent) {
            <div
						[class]="
							'col-12 text-' +
							(logIsOpen ? 'left d-flex justify-content-between' : 'center') +
							' button margin-content'
						"
              >
              <button
                nbButton
                status="primary"
                [class]="styles.btnStart"
                (click)="running ? stopServer() : runServer()"
                [disabled]="loading"
                >
                <nb-icon
                  *gauzySpinnerButton="loading || restart"
                  [icon]="btn.icon"
                  class="icon-medium"
                ></nb-icon>
                {{ btn.name | translate }}
              </button>
            </div>
          }
        </div>
      </nb-card-body>
    </nb-card>
  </nb-layout-column>
</nb-layout>
