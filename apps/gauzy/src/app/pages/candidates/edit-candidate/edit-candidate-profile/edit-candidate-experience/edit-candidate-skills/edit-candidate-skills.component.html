<nb-card>
  <nb-card-header
    style="display: flex; justify-content: flex-end; align-items: center"
    >
    <div class="btn-group actions mr-1">
      @if (!showAddCard) {
        <button
          nbButton
          status="success"
          (click)="add()"
          class="action"
          size="small"
          >
          <nb-icon icon="plus-outline"></nb-icon>
          {{ 'BUTTONS.ADD' | translate }}
        </button>
      }
    </div>
    @if (!showAddCard) {
      <ga-layout-selector
        class="ml-3"
        componentName="{{ viewComponentName }}"
      ></ga-layout-selector>
    }
    @if (showAddCard) {
      <div class="container">
        @if (form) {
          <form class="row" [formGroup]="form">
            <div class="col-11 pl-0" formArrayName="skills">
              @for (skill of skills?.controls; track skill; let i = $index) {
                <div>
                  <div [formGroupName]="i">
                    <input
                      formControlName="name"
                      class="col-12"
                      nbInput
                      type="text"
								placeholder="{{
									'FORM.PLACEHOLDERS.ADD_SKILL' | translate
								}}"
                      fullWidth
                      />
                    </div>
                  </div>
                }
              </div>
              <div class="col-1 pr-0">
                <button
                  (click)="submitForm()"
                  class="w-100"
                  nbButton
                  status="success"
                  >
                  {{ 'BUTTONS.SAVE' | translate }}
                </button>
                <button
                  (click)="showAddCard = !showAddCard"
                  nbButton
                  outline
                  status="basic"
                  class="w-100"
                  >
                  {{ 'BUTTONS.CANCEL' | translate }}
                </button>
              </div>
            </form>
          }
        </div>
      }
    </nb-card-header>
    @if (skillList?.length && dataLayoutStyle === 'TABLE') {
      <nb-card-body>
        @for (skill of skillList; track skill; let i = $index) {
          <nb-card class="skill">
            <nb-card-body>
              @if (!showEditDiv[i]) {
                <span> {{ skill.name }}</span>
              }
              @if (showEditDiv[i]) {
                <div class="row m-0">
                  <input
                    #editInput
                    class="col-10"
                    nbInput
                    type="text"
                    [value]="skill.name"
                    fullWidth
                    />
                    <div class="col-1">
                      <button
                        (click)="cancel(i)"
                        outline
                        nbButton
                        status="basic"
                        >
                        {{ 'BUTTONS.CANCEL' | translate }}
                      </button>
                    </div>
                    <div class="col-1">
                      <button
                        (click)="editSkill(editInput.value, i)"
                        nbButton
                        status="success"
                        >
                        {{ 'BUTTONS.UPDATE' | translate }}
                      </button>
                    </div>
                  </div>
                }
                @if (!showEditDiv[i]) {
                  <nb-actions
                    class="float-right"
                    e="medium"
                    >
                    <nb-action
                      (click)="showEditCard(i, skill.id)"
                      class="d-inline pr-2"
                      icon="edit"
                    ></nb-action>
                    <nb-action
                      (click)="removeSkill(skill)"
                      class="d-inline pr-0 pl-2"
                      icon="close"
                    ></nb-action>
                  </nb-actions>
                }
              </nb-card-body>
            </nb-card>
          }
        </nb-card-body>
      }
      @if (skillList?.length) {
        <nb-card-body>
          @if (dataLayoutStyle === 'CARDS_GRID') {
            <ga-card-grid
              [totalItems]="pagination?.totalItems"
              [settings]="settingsSmartTable"
              [source]="skillList"
              [buttonTemplate]="actionButtons"
            ></ga-card-grid>
          }
        </nb-card-body>
      }
      <ng-template
        #actionButtons
        let-buttonSize="buttonSize"
        let-selectedItem="selectedItem"
        >
        <button
          (click)="gridEdit(selectedItem)"
          nbButton
          status="info"
          class="mr-2"
          [disabled]="!selectedItem && disableButton"
          [size]="buttonSize || 'medium'"
          >
          <nb-icon class="mr-1" icon="edit-outline"></nb-icon>
          {{ 'BUTTONS.EDIT' | translate }}
        </button>
        <button
          (click)="removeSkill(selectedItem.id)"
          nbButton
          status="danger"
          class="mr-2"
          [disabled]="!selectedItem && disableButton"
          [size]="buttonSize || 'medium'"
          >
          <nb-icon class="mr-1" icon="archive-outline"> </nb-icon>
          {{ 'BUTTONS.DELETE' | translate }}
        </button>
      </ng-template>
    </nb-card>
